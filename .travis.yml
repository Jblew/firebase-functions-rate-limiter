dist: xenial
language: node_js

before_install:
    - scripts/setup-firebase-emulator-for-tests.sh

install:
    - npm ci

script:
    - npm run build
    - npm run test
    - npm run verify

deploy:
    - provider: script
      script: npx semantic-release
      skip_cleanup: true
      on:
          tags: false
          all_branches: true

env:
    global:
        - secure: zzgmXrnrXL3e00y7dXlAlN6ynsA0WkyOqU6dQpFH6cgdVMrJcVpBYFKX8bS9CE3DL+EbFfRetf0nQ1ll/8zZWQI3IzAf8ChoCJniwFsfF7BmzcfBKgjjJ+eB5B+sK12NhY91jkXtvi7I8/HlvigaTw4v8+FzvC0e1i1WLCVdCYrbRyoDnS+owR7GJOaDro/lc4wGahJuIHyvCXNseVX7TVHc/aBFrWGQz9dHB+4Ji+CNR+X3DoS0QXy9L7UawP+Rsy7qHxzJvlaBQA/tAwK6PYKYoESvAwpnbzYzncjhusApTyVKTfOCGBo2iE/FKz9aXAHaC3ssSYN3DJKv/jZCcJ+DuyY7Z014n2gXS4eT5J35KDpFkmTeFIAtHBDL1/dpaTFkgpDhU1wGag1lxnVAIZd5JGShDe/QO6a4Dy9rLb5Fvc7xvW2Ps38xr44Hg4/RdGGRiasGcp8+kSGEPM5fRWPg6cEtWt7Dnm+JzXiIqi+YaAo1DE09xriaUaQBgkEXNJIGrMkYC8M3RovIiOLRV5J2XBSzlJ9ubzP83ZKhaCFhCWZmvZAN2sUkAMzF8C/TiViWzyXVOGmYxW0xIQjGSir6T8WlMCgPD5hX0/2fDyJnnJp/y4VsfCeBFq3kTe9m8kiC5EaBUTlk74iUggRWrBPvXxSMpeRMqnHiBC+3TFI=
        - secure: gSDb7UcGbo0XKDLO0LzYsTohCoGzseCuPPw5/EAAIVlTFVIIGNfRO4fIxhuJWbw43dtQDKE3T4dNH3w2R18np3SDUVneEs76A+u7dWwb50G9l30mQNNZHCq0cKYyJVLgMPOg8OVYfEWfLnW7SOPOUAjr8NfPVCGYgh92nA5rx9Qz/zjpeep8/ecal1469iO7V7oDWLh+82ozMth0WuAmT2UTVmPytA6WX+z3Pen9qWNnwqylUc/b7qOM/EtMgPF/LgmT5hoixGO4+4wmJ1tjmw63NqnSg/8PyYMZgNyOxvEJnuf4c2waTRfAQW5HULNOO1QFwThVMigakWCqdmr1yqhzZs9RMjqqxSv2xGAKoo8ojRmZLM2yDkiQphhEwvYDOYw0g0txCoDpJwrikQ2u4rg319WWR8r/iDHpQ+XeDKKs0/UdpGEtqRxrJIvU0GSF3Wc90Ql1GdQ0DmBZT3/33j1ow9A/AzQiyLPRTy+UuAEkOos0W6KEfhtdXKeMX7/dObtPUihTb02XFymBbtv1KoZbL8SETWOewIpicNIxXcxvCDf6MBx24WoYX6dYNiTLQtcpKl91qdG59kl9YekmSul3ueJlC3g6c1/WDqV6ja14OhXfH/hRaD5eU2C4epJeZSh53Jypa2XrAIFQjXZz+utsN/N8FTUW5Al4cGW6YiA=
