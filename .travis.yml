dist: xenial
language: node_js

before_install:
    - scripts/setup-firebase-emulator-for-tests.sh

install:
    - npm ci

script:
    - npm run build
    - npm run test
    - npm run verify

deploy:
    - provider: script
      script: npx semantic-release
      skip_cleanup: true
      on:
          tags: false
          all_branches: true

env:
  global:
    - secure: galXDkvpLtSutsBRPZufsX4OSrkNXAuox1c4wJQ449e2gpowoGU6+qvsk8v9lX/yMlkEMfrGsVCdPA3jd58+xHFxVx/GgxlVLI6825Yy4fu+bkXS/qSLhWLuHiSWnWoUpMSDkAbv2PTzf8fe+o5JA45xmUGNe3dnij9IXB5wU6q5nsp0d5A0zr4IMIBAVoEgSEmWkWS3MbftXNRKtHzccL1/pKLENgvS78JzilP780tLWdgYAFyaT4pi+6EjIpQzoBKBe7YBhdJ8yWY63w10qd5NOy6SsUM7mMaz6Iz1YEZLXtgC/T5WFk4Fil5V1Z1Ga5GFuLReHV2bZm9vzaBibprpTUZ9M1w1pm3ykcl3/95U9nOoX9modr7QYJRGEg0DUhzkl9/Mp/St7s5DEFejzUka0kttGmAXEWyqPYHX2d/UIw+p43gCpYR3o+Q6XBJmvkvnylEik2MfZCr1rYTYhKrwKSY9GfmhkNH4sfWvKpapSNhJ3/WyKaptPAE0XLsJc2T9ebOkcKp2vY3fSFQEiSTeAyOj9CwZBnfQy/OrF1EnmH4znenSnvO+9+Npro2uLiQQpxyJEOW5Geujfwv0DDARxXx32YGA9fMaJaHZbLQI27FwtLbqUsFfYsqOaKrWYK22zUPCJPZdETiw4uTwKz/ySWTu21p46Ad+/sr/oIM=
    - secure: TvE3VF1wvNrwWJBzM6dpi3vyt0l5pIzNhtvW1taGprZXcBH+Xl7aoESlt/1hb98xUfXNpUi+mmxJY9PUxMCVYrjG87zD+7YKe+GKMmtXOoylcqi/goy4cWtPEBqv9YNDpwWAIKAvSklgyC9L4FcHaN1XxbiOJaU4l44spGTXNQvxZRnI9RZW0idFPmf79jZqBnAogRFDwo2+VvwSPmWyEikjeL1BQIKaz+yTkex1OBz+NrLohI2AjGS4oJLRh0gNq6AEjcY7BaVvAQ6aByfPtedLRcH4c9Yd0jAI0ZIvmf/mvcm011puIkRignZmMDj+XZ+zrkzWgUIxme2lEaPnlNMeHjRSzdAmGff40w5Mjq3+wTouaZGs7Ifa0SfiLIcpQeu8TT6aTLuEbMhGSRiI1QhophLiFJqofdbdGM+FTRuBe/I55QM0jTEouHAmh3Y2DZ/2ugASqm27Etkst2+u1KE/+y56bVx/FuuNf2FYQUIQaJlSptABQZy8nJ3yl9e89yG+k4GLxCDrGDZVO9r+W7vqkjmyxxWySoOZORE2TLsOS7+WeP68rZ9bQvhwViJMba9FJ3rkqBcjGi6oquqiEIlfggezuCqv5nWm/0mPi7H78gFV5p2XDLMqITAA6D8SHEWL4gRSS7tAKGG5SN6JQaHCHh8lm3OGyhXHBybBPL4=
