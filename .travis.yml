dist: xenial
language: node_js

before_install:
    - scripts/setup-firebase-emulator-for-tests.sh

install:
    - npm ci

script:
    - npm run build
    - npm run test
    - npm run verify

deploy:
    - provider: script
      script: npx semantic-release
      skip_cleanup: true
      on:
          tags: false
          all_branches: true

env:
  global:
    - secure: Z7o4D2iYbz1On71oYNFxp6RB+K3XAPrktG7tmI5LxEIXstT5c3x0jLlLboc55NpItuJW02shNof/2oDqn9fDSHOpkjaem3mMfYNoLiH5aY96tF+JNojJYgfDidPWkpd6XsqjGDWRamf9BvFxoeEyq08ETOZnC1Mv3jC7mMfQgWWyyHdszDT3/MYuEa8HDYXA81rBy841NVGl3NxikpcMMnswafeBdXU/qFbzRgrN9mUui/M4SnEP+uZqJNSpbF+FmTjShdAIqtSIIhCyxNEPPP/lS2xGZGwHN9AVCNu10ShQYtIp7P4uZOGdFeQHt6ZsPes2s/ALd+4Qmpn7AwOkPS35pcvsASMyS+ccAyWan2VHrhiVbOCCKYhwebW5j9tMYHOAtpYwMVaKy/IXYEZfuBP76kupoFn5FIEse8GuNREllHn3XmITsznH8LFIcOwWAg19pKfCSfIeMkAA24I6GTc9rzaxBfVX5GA7adWDX6CYtrE/VHk+Qq7cvtkT/ZBEKiS6ou1KzLDWjd6q0GxAR4l7E3mS4vZ/wqeOFujjMCmfubkINhT3jXQi8/qoKvJ2g7tlNO/Fcaw2q0pWNOhJGlb0EcE+frcNMnVPspTHEZRNBqHwJ4HJVmoGiSMWebOgos3D+xMHuKhUVh9KlRgKExbEQ7jnfzYOlqRL1495wRI=
    - secure: LMkh71aDI54yRfGgBsBa2RWaR7mg3B5JpMT5JlssbbhvOLhrAJ7qJkyDq+bzFXYH188kEIt6DjiaJtPysumGBLTiLQgBTCwZx4xY8It8vHtcWXmoUqxoFCfbAot7BR2jw2/12uYXG/AZ2uKBIaHdIFUXOLzM7saZaY+oxtLDQ7hCyRFE02t8LAyAB1x3KngrXsfuKDA9HTfFMb7L68LGxdBUvB2Y8vCXIEvEFi4Hv0ZGnKcZXuhKSF3jd5zQdvfigvE8/gw35BaXxYoubOsjwrhBF+cKlPvLQhha4fgd7xTBrITzNBLEIfdfQ5zjZVa8G1CDHv5ZyzzClWvKNj0m1hlUI2jZxjC6xWSugBu/HZhj8NEcMV6lkq2FkJnp/W/sUaYu3Sqz0xw8WhwYqbzWzMlfFokgTXikOVOPC+WK11ug6zpyy0N6lAOoj9xHHZ2AzdTqJExTISQUKb97Sl8uBPL6EG7wbGIpQHTDcYVPA4FlnLINemm5WwKachz8X2WpYaScIwpQKTd9q04sX8uHMrOrBwuf5J0mXBnVJWHNVajGEnG8OHWvZ7ZT3JnrDQkQEHhLYolfqSUEYGEbyUcmokLG28NP7GbehbBQ+wPGgwIYYo/Ecv+6QtjOEnV4TjoS+H6e6LxgWerIt30Hs+MvKB0LV0dcfdRHS1aGPx3on7M=
